{"version":3,"sources":["Directives/FieldDirective.ts"],"names":[],"mappings":"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","file":"FieldDirective.js","sourcesContent":["/// <reference path=\"../models/grid.ts\" />\r\n/// <reference path=\"../services/entities/fieldconfigurationsservice.ts\" />\r\n\r\nmodule AngularTablesDataManagerApp.Directives {\r\n    import models = AngularTablesDataManagerApp.Models;\r\n    import services = AngularTablesDataManagerApp.Services;\r\n\r\n    interface IFieldDirectiveScope extends ng.IScope {\r\n        entityName: string;\r\n        contentUrl: string;\r\n        tipology: models.MetadataProperty;\r\n        property: models.RowProperty;\r\n        fieldItems: Array<models.FieldItem>;\r\n        values: Array<models.FieldItem>;\r\n    }\r\n\r\n    export class FieldDirective implements ng.IDirective {\r\n        fieldConfigurationsService: services.FieldConfigurationsService;\r\n        public restrict = 'E';\r\n        public scope = {\r\n            entityName: '=',\r\n            tipology: '=',\r\n            property: '=',\r\n            fieldItems: '='\r\n        };\r\n        public template = '<ng-include src=\"contentUrl\" />';\r\n        public link = (scope: IFieldDirectiveScope, element: JQuery, attrs: IArguments) => {\r\n            scope.values = new Array<models.FieldItem>();\r\n\r\n            if (scope.fieldItems != null) {\r\n                for (var i = 0; i < scope.fieldItems.length; i++) {\r\n                    scope.values.push(scope.fieldItems[i]);\r\n                }\r\n            }\r\n\r\n            var tipology: string = scope.tipology.Type;\r\n            this.fieldConfigurationsService.getFieldConfigurationTipology(scope.entityName, scope.tipology.Name).then((data: string) => {\r\n                if (data != \"\") {\r\n                    tipology = data;\r\n                    this.fieldConfigurationsService.getFieldValues(scope.entityName, scope.tipology.Name).then((data: Array<string>) => {\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            var item: models.FieldItem = new models.FieldItem(data[i], data[i]);\r\n                            scope.values.push(item);\r\n                        }\r\n\r\n                        this.openView(scope, tipology);\r\n                    });\r\n                }\r\n                else {\r\n                    this.openView(scope, tipology);\r\n                }\r\n            });\r\n        }\r\n\r\n        public constructor(fieldConfigurationService: services.FieldConfigurationsService) {\r\n            this.fieldConfigurationsService = fieldConfigurationService;\r\n        }\r\n\r\n        private openView(scope: IFieldDirectiveScope, tipology: string) {\r\n            if (tipology.toLowerCase().indexOf('int') != -1) {\r\n                scope.contentUrl = 'app/directives/InputNumber.html';\r\n            }\r\n            else if (tipology.toLowerCase().indexOf('radio') != -1) {\r\n                scope.contentUrl = 'app/directives/InputRadio.html'\r\n            }\r\n            else if (tipology.toLowerCase().indexOf('select') != -1) {\r\n                scope.contentUrl = 'app/directives/InputSelect.html';\r\n            }\r\n            else {\r\n                scope.contentUrl = 'app/directives/InputText.html';\r\n            }\r\n        }\r\n    }\r\n\r\n    AngularTablesDataManager.module.directive('field', ['FieldConfigurationsService', (fieldConfigurationService: services.FieldConfigurationsService) => new Directives.FieldDirective(fieldConfigurationService)]);\r\n}"]}